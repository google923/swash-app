<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0078d7" />
  <title>Policy Handbook - Swash Cleaning Ltd</title>
  <link rel="manifest" href="../manifest.json" />
  <link rel="icon" href="../assets/favicon-192.png" type="image/png" />
  <link rel="stylesheet" href="../style.css" />
  <style>
    .policy-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: white;
    }
    .policy-header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 3px solid #0078d7;
    }
    .policy-header h1 {
      color: #0078d7;
      font-size: 2rem;
      margin: 0 0 8px 0;
    }
    .policy-header .subtitle {
      color: #64748b;
      font-size: 1.1rem;
      margin: 8px 0;
    }
    .policy-header .contact-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-top: 20px;
      font-size: 0.95rem;
      color: #475569;
    }
    .contact-item {
      display: flex;
      flex-direction: column;
    }
    .contact-item strong {
      color: #0078d7;
    }
    .director-message {
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      border-left: 4px solid #0078d7;
      padding: 24px;
      border-radius: 8px;
      margin: 30px 0;
      font-style: italic;
    }
    .director-message p {
      margin: 12px 0;
      line-height: 1.8;
      color: #1e293b;
    }
    .director-signature {
      text-align: right;
      margin-top: 20px;
      font-style: normal;
      font-weight: 600;
      color: #1e293b;
    }
    .contents {
      background: #f8fafc;
      padding: 20px;
      border-radius: 8px;
      margin: 30px 0;
    }
    .contents h2 {
      color: #0078d7;
      margin-top: 0;
    }
    .contents ul {
      columns: 2;
      column-gap: 30px;
      line-height: 2;
      list-style: none;
      padding: 0;
    }
    .contents li {
      margin-bottom: 8px;
    }
    .policy-section {
      margin: 40px 0;
      page-break-inside: avoid;
    }
    .policy-section h2 {
      color: #0078d7;
      font-size: 1.4rem;
      margin: 0 0 16px 0;
      padding-bottom: 8px;
      border-bottom: 2px solid #e5e7eb;
    }
    .policy-section h3 {
      color: #1e293b;
      font-size: 1.1rem;
      margin: 16px 0 8px 0;
    }
    .policy-section p {
      line-height: 1.7;
      color: #475569;
      margin: 12px 0;
    }
    .policy-section ul, .policy-section ol {
      line-height: 1.8;
      color: #475569;
      margin: 12px 0 12px 20px;
    }
    .policy-section li {
      margin: 8px 0;
    }
    .policy-table {
      width: 100%;
      border-collapse: collapse;
      margin: 16px 0;
    }
    .policy-table th {
      background: #0078d7;
      color: white;
      padding: 12px;
      text-align: left;
      font-weight: 600;
    }
    .policy-table td {
      padding: 12px;
      border-bottom: 1px solid #e5e7eb;
    }
    .policy-table tr:hover {
      background: #f8fafc;
    }
    .highlight-box {
      background: #fef3c7;
      border-left: 4px solid #f59e0b;
      padding: 16px;
      border-radius: 4px;
      margin: 16px 0;
    }
    .footer-text {
      text-align: center;
      color: #64748b;
      font-size: 0.9rem;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #e5e7eb;
    }
    .back-button {
      display: inline-block;
      margin-bottom: 20px;
    }
    @media print {
      body { background: white; }
      .policy-container { max-width: 100%; padding: 0; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-left">
      <img class="header-logo" src="../assets/swash-logo.png" alt="Swash logo" />
    </div>
    <div class="header-actions">
      <a href="/rep/rep-home.html" class="btn btn-secondary">← Back to Home</a>
    </div>
  </header>

  <main class="page">
    <div class="policy-container">
      <!-- Header with Logo -->
      <div class="policy-header">
        <div style="margin-bottom: 24px;">
          <img 
            src="../assets/blue-logo.png" 
            alt="Swash Cleaning Ltd Logo" 
            style="height: 80px; object-fit: contain;"
          >
        </div>
        <p class="subtitle">Field Sales Team Policy Handbook (Version 1.3)</p>
        <div class="contact-info">
          <div class="contact-item">
            <strong>Registered Address</strong>
            71–75 Shelton Street, London, WC2H 9JQ
          </div>
          <div class="contact-item">
            <strong>Email</strong>
            contact@swashcleaning.co.uk
          </div>
          <div class="contact-item">
            <strong>Telephone</strong>
            03300 436 345
          </div>
          <div class="contact-item">
            <strong>Director</strong>
            Christopher Wessell
          </div>
        </div>
      </div>

      <!-- Director Message -->
      <div class="director-message">
        <h2 style="margin-top: 0; color: #0078d7;">Welcome Message from the Director</h2>
        <p>Welcome to Swash Cleaning Ltd. We're proud to have you join our growing team of professional field sales representatives. At Swash, we believe in teamwork, integrity, and personal accountability. Every conversation you have at the door represents our brand and builds trust within the communities we serve.</p>
        
        <p>This handbook explains what's expected from you and what you can expect from us. It outlines our policies, standards, and values to help you succeed in your role and grow with the company.</p>
        
        <p>Please read this handbook carefully and refer to it whenever you need guidance. Together, we'll continue to build Swash Cleaning Ltd into one of Essex's most trusted and respected professional window cleaning companies.</p>
        
        <p>Thank you for being part of the Swash team.</p>
        
        <div class="director-signature">
          Christopher Wessell<br>
          Director, Swash Cleaning Ltd
        </div>
      </div>

      <!-- Contents -->
      <div class="contents">
        <h2>Contents</h2>
        <ul>
          <li>Probationary Performance & Dismissal Policy</li>
          <li>Training Pay & Expectations Policy</li>
          <li>Sales Commission & Incentive Policy</li>
          <li>Mileage & Expenses Policy</li>
          <li>Sickness, Absence & Holiday Policy</li>
          <li>Customer Interaction & Sales Conduct Policy</li>
          <li>Data Protection & Confidentiality Policy</li>
          <li>Uniform & Appearance Policy</li>
          <li>Health & Safety & Lone Working Policy</li>
          <li>Equal Opportunities & Anti-Discrimination Policy</li>
          <li>Disciplinary & Grievance Policy</li>
          <li>Code of Conduct</li>
          <li>Social Media & Brand Representation Policy</li>
          <li>Non-Compete & Post-Employment Conduct</li>
          <li>Technology & App Usage Policy</li>
          <li>Driving Licence & Vehicle Declaration</li>
          <li>Policy Acknowledgement</li>
        </ul>
      </div>

      <!-- Section 1 -->
      <div class="policy-section">
        <h2>1. Probationary Performance & Dismissal Policy</h2>
        <h3>Purpose</h3>
        <p>To provide a fair and transparent process for managing performance during probation.</p>
        
        <h3>Minimum Standard</h3>
        <p>Maintain an average of 4 verified new customer signups per working day. A verified signup means a customer who has paid in advance for initial cleans and whose first clean has been completed.</p>
        
        <h3>Performance Calculation</h3>
        <ul>
          <li>Only worked days are counted.</li>
          <li>Approved absences (holiday, certified sickness, unpaid leave) are excluded.</li>
          <li>Unapproved absences count toward the average and may reduce performance results.</li>
        </ul>
        
        <h3>Process for Underperformance</h3>
        <ul>
          <li><strong>Week 1 Below Target:</strong> Written warning + coaching plan.</li>
          <li><strong>Week 2 Below Target:</strong> Employment may be terminated with one week's statutory notice.</li>
          <li><strong>Post-Probation:</strong> Ongoing underperformance triggers a Performance Improvement Plan (PIP). Failure to improve may result in dismissal.</li>
        </ul>
        
        <h3>Right of Appeal</h3>
        <p>Employees may appeal any dismissal in writing within 5 working days.</p>
      </div>

      <!-- Section 2 -->
      <div class="policy-section">
        <h2>2. Training Pay & Expectations Policy</h2>
        <h3>Purpose</h3>
        <p>To ensure all new employees are paid fairly during their initial onboarding and training period while setting clear expectations for learning and development.</p>
        
        <h3>Training Pay</h3>
        <ul>
          <li>All training time, including induction sessions, app setup, and live field coaching, is paid at the employee's standard hourly rate (£12.21/hr).</li>
          <li>Training is classed as working time and forms part of continuous employment.</li>
          <li>Employees who achieve a daily verified signup average of 4 or more during training are eligible for standard commission on those verified sales.</li>
          <li>Commission earned during the training period will be paid in the following month's payroll, once verification is complete.</li>
        </ul>
        
        <h3>Performance Expectations During Training</h3>
        <ul>
          <li>There is no minimum performance requirement during the first week of training — the focus is learning and confidence.</li>
          <li>In Week 2, employees are encouraged to begin applying what they've learned and may start earning commission for verified sales if they reach the standard performance level.</li>
          <li>Full performance expectations (4+ verified signups per working day) apply once the training period concludes and the probationary review begins.</li>
        </ul>
        
        <h3>Fairness & Compliance</h3>
        <p>This policy ensures all employees are paid for their training time and can also earn commission if they reach standard performance levels early. It supports fairness, motivation, and compliance with UK employment law.</p>
      </div>

      <!-- Section 3 -->
      <div class="policy-section">
        <h2>3. Sales Commission & Incentive Policy</h2>
        <h3>Commission Eligibility</h3>
        <p>Earned only on verified signups (customer prepaid, first clean completed).</p>
        
        <h3>Commission Rates</h3>
        <table class="policy-table">
          <thead>
            <tr>
              <th>Daily Average</th>
              <th>Commission Rate</th>
              <th>£ per Sale (based on £25 customer value)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>4.0 (Minimum)</td>
              <td>25%</td>
              <td>£6.25</td>
            </tr>
            <tr>
              <td>5.0</td>
              <td>30%</td>
              <td>£7.50</td>
            </tr>
            <tr>
              <td>6.0</td>
              <td>35%</td>
              <td>£8.75</td>
            </tr>
            <tr>
              <td>8.0+</td>
              <td>40%</td>
              <td>£10.00</td>
            </tr>
          </tbody>
        </table>
        
        <h3>Payment</h3>
        <p>Monthly in arrears, with base pay. Only verified sales completed before payroll cut-off are included.</p>
        
        <h3>Clawback Clause</h3>
        <p>If a verified customer cancels or refunds before their first three cleans are completed, commission may be deducted or offset in the following pay cycle.</p>
        
        <h3>Bonuses & Incentives</h3>
        <p>Temporary competitions or bonuses may be introduced. Participation is discretionary.</p>
      </div>

      <!-- Section 4 -->
      <div class="policy-section">
        <h2>4. Mileage & Expenses Policy</h2>
        <ul>
          <li>Mileage between assigned sales areas and business errands may be claimed.</li>
          <li>Commute to/from home is not reimbursed.</li>
          <li><strong>Rate:</strong> 45p per mile for the first 10,000 miles annually (HMRC compliant).</li>
          <li><strong>Tracking:</strong> Must use approved mileage app.</li>
          <li><strong>Payments:</strong> Monthly with payroll.</li>
          <li>No payment for parking fines, speeding tickets, or private mileage.</li>
        </ul>
      </div>

      <!-- Section 5 -->
      <div class="policy-section">
        <h2>5. Sickness, Absence & Holiday Policy</h2>
        <h3>Reporting Absence</h3>
        <p>Notify your manager by 9:30am on the first day of illness. Absences over 7 days require a Fit Note.</p>
        
        <h3>Holiday Entitlement</h3>
        <p>28 days paid holiday per year (including bank holidays). Requests must be made at least 2 weeks in advance. Holiday is accrued pro-rata. Unpaid leave requests may be considered at management's discretion.</p>
        
        <h3>Unapproved Absence</h3>
        <p>May count against performance or lead to disciplinary action.</p>
      </div>

      <!-- Section 6 -->
      <div class="policy-section">
        <h2>6. Customer Interaction & Sales Conduct Policy</h2>
        <h3>Expected Conduct</h3>
        <ul>
          <li>Always wear uniform.</li>
          <li>Be polite, honest, and professional.</li>
          <li>Never use aggressive or misleading sales tactics.</li>
          <li>Respect "No Cold Calling" signs and withdraw when asked.</li>
          <li>Do not collect or record customer payment details manually.</li>
          <li>Customers must enter payment details directly via GoCardless or company systems.</li>
        </ul>
        
        <h3>Complaints</h3>
        <p>Must be reported to management immediately.</p>
      </div>

      <!-- Section 7 -->
      <div class="policy-section">
        <h2>7. Data Protection & Confidentiality Policy</h2>
        <ul>
          <li>All data must be handled under GDPR.</li>
          <li>Never share or store data outside authorised systems.</li>
          <li>Retain customer records securely for a maximum of 6 years after account closure.</li>
          <li>Employees must use strong passwords and lock devices when unattended.</li>
          <li>Breaches may lead to disciplinary action and possible legal consequences.</li>
        </ul>
      </div>

      <!-- Section 8 -->
      <div class="policy-section">
        <h2>8. Uniform & Appearance Policy</h2>
        <h3>Company Provides</h3>
        <ul>
          <li>Polo shirt</li>
          <li>Jacket</li>
          <li>Umbrella</li>
        </ul>
        
        <h3>Employee Must Provide</h3>
        <ul>
          <li>Black trousers</li>
          <li>Footwear</li>
        </ul>
        
        <h3>Requirement</h3>
        <p>Uniform must be clean, presentable, and worn while representing Swash.</p>
      </div>

      <!-- Section 9 -->
      <div class="policy-section">
        <h2>9. Health & Safety & Lone Working Policy</h2>
        <ul>
          <li>Follow training and safety guidance at all times.</li>
          <li>Keep phone charged and GPS active.</li>
          <li>Carry a small first aid kit and report any incidents or near misses within 24 hours.</li>
          <li>Risk assessments are conducted regularly for all lone working roles.</li>
          <li>In case of emergency, contact your manager immediately and move to a safe location.</li>
          <li>Check in with your manager at start and end of shift.</li>
          <li>Never enter a customer's home.</li>
        </ul>
      </div>

      <!-- Section 10 -->
      <div class="policy-section">
        <h2>10. Equal Opportunities & Anti-Discrimination Policy</h2>
        <p>Swash Cleaning Ltd provides equal opportunities for all employees. Discrimination or harassment of any kind will not be tolerated. We are committed to making reasonable adjustments for employees with disabilities and ensuring fair treatment at all times.</p>
        
        <h3>Reporting</h3>
        <p>Any employee who experiences or witnesses discrimination or harassment should report it immediately to management or the Director. All reports will be handled confidentially.</p>
      </div>

      <!-- Section 11 -->
      <div class="policy-section">
        <h2>11. Disciplinary & Grievance Policy</h2>
        <h3>Disciplinary Steps</h3>
        <ol>
          <li>Informal discussion or verbal warning</li>
          <li>Written warning</li>
          <li>Final written warning</li>
          <li>Dismissal</li>
        </ol>
        
        <h3>Employee Rights</h3>
        <p>Employees have the right to be accompanied at disciplinary or grievance hearings by a colleague or trade union representative.</p>
        
        <h3>Grievance Procedure</h3>
        <ol>
          <li>Submit concerns in writing to a manager.</li>
          <li>Response within 5 working days.</li>
          <li>Appeals go to the Director or an impartial senior representative.</li>
        </ol>
      </div>

      <!-- Section 12 -->
      <div class="policy-section">
        <h2>12. Code of Conduct</h2>
        <p>All employees must:</p>
        <ul>
          <li>Act with integrity and professionalism.</li>
          <li>Treat colleagues and customers respectfully.</li>
          <li>Protect company property.</li>
          <li>Avoid alcohol or drugs during work.</li>
          <li>Uphold Swash Cleaning Ltd's reputation at all times.</li>
        </ul>
      </div>

      <!-- Section 13 -->
      <div class="policy-section">
        <h2>13. Social Media & Brand Representation Policy</h2>
        <ul>
          <li>Do not share customer information or addresses online.</li>
          <li>Do not use the Swash brand name or logo on personal accounts without permission.</li>
          <li>Avoid posting anything that may damage the company's reputation.</li>
        </ul>
      </div>

      <!-- Section 14 -->
      <div class="policy-section">
        <h2>14. Non-Compete & Post-Employment Conduct</h2>
        <p>For 6 months after leaving, employees must not:</p>
        <ul>
          <li>Provide or promote cleaning services to Swash customers engaged within the last 12 months.</li>
          <li>Operate or assist a competing business within 15 miles of their previous sales area.</li>
        </ul>
      </div>

      <!-- Section 15 -->
      <div class="policy-section">
        <h2>15. Technology & App Usage Policy</h2>
        <ul>
          <li>Use only company-approved apps for signups, mileage, and reporting.</li>
          <li>All customer and sales data remain property of Swash Cleaning Ltd.</li>
          <li>Personal use of company devices or apps during work hours is not permitted.</li>
          <li>Tracking and GPS tools must remain active while working.</li>
          <li>Full details are provided in the standalone Technology & App Usage Policy document.</li>
        </ul>
      </div>

      <!-- Section 16 -->
      <div class="policy-section">
        <h2>16. Driving Licence & Vehicle Declaration</h2>
        <p>All employees using personal vehicles for business must:</p>
        <ul>
          <li>Hold a full UK driving licence.</li>
          <li>Maintain valid MOT and insurance for business use.</li>
          <li>Submit the Driving Licence & Vehicle Declaration Form.</li>
        </ul>
      </div>

      <!-- Section 17 -->
      <div class="policy-section">
        <h2>17. Policy Acknowledgement</h2>
        <div class="highlight-box">
          <p style="margin: 0;"><strong>I confirm I have received, read, and understood the Swash Cleaning Ltd Field Sales Team Policy Handbook and agree to comply with all company policies.</strong></p>
        </div>
        
        <form id="policyAcknowledgementForm" style="margin-top: 30px;">
          <!-- Employee Name -->
          <div style="margin-bottom: 24px;">
            <label for="employeeName" style="display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Employee Name:</label>
            <input 
              type="text" 
              id="employeeName" 
              name="employeeName" 
              required
              placeholder="Enter your full name"
              style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 6px; font-size: 1rem; box-sizing: border-box; font-family: Arial, sans-serif;"
            >
          </div>

          <!-- Employee Signature -->
          <div style="margin-bottom: 24px;">
            <label for="signatureCanvas" style="display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Employee Signature:</label>
            <div style="border: 2px solid #e5e7eb; border-radius: 6px; background: #f8fafc; padding: 8px; max-width: 600px;">
              <canvas 
                id="signatureCanvas" 
                width="600" 
                height="200"
                style="display: block; cursor: crosshair; background: white; border-radius: 4px; touch-action: none; width: 100%; height: auto;"
              ></canvas>
            </div>
            <div style="display: flex; gap: 8px; margin-top: 8px;">
              <button 
                type="button" 
                id="clearSignature" 
                class="btn btn-secondary"
                style="flex: 1;"
              >Clear Signature</button>
              <button 
                type="button" 
                id="undoSignature" 
                class="btn btn-secondary"
                style="flex: 1;"
              >Undo</button>
            </div>
            <p style="font-size: 0.85rem; color: #64748b; margin-top: 8px;">Click and drag to sign above</p>
          </div>

          <!-- Employee Date (Auto-filled) -->
          <div style="margin-bottom: 24px;">
            <label for="employeeDate" style="display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Date:</label>
            <input 
              type="text" 
              id="employeeDate" 
              name="employeeDate" 
              readonly
              style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 6px; font-size: 1rem; box-sizing: border-box; background: #f8fafc; color: #64748b;"
            >
          </div>

          <!-- Director Section -->
          <div style="margin-top: 40px; padding-top: 24px; border-top: 2px solid #e5e7eb;">
            <p style="font-weight: 600; color: #1e293b; margin-bottom: 20px;">For Swash Cleaning Ltd:</p>
            
            <div style="margin-bottom: 24px;">
              <p style="margin: 0 0 8px 0; font-weight: 600; color: #1e293b;">Christopher Wessell (Director)</p>
            </div>

            <div style="margin-bottom: 24px;">
              <label for="directorSignature" style="display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Signature:</label>
              <div style="border: 2px solid #e5e7eb; border-radius: 6px; background: #f8fafc; padding: 8px; max-width: 600px;">
                <canvas 
                  id="directorSignature" 
                  width="600" 
                  height="200"
                  style="display: block; cursor: crosshair; background: white; border-radius: 4px; touch-action: none; width: 100%; height: auto;"
                ></canvas>
              </div>
              <div style="display: flex; gap: 8px; margin-top: 8px;">
                <button 
                  type="button" 
                  id="clearDirectorSignature" 
                  class="btn btn-secondary"
                  style="flex: 1;"
                >Clear Signature</button>
                <button 
                  type="button" 
                  id="undoDirectorSignature" 
                  class="btn btn-secondary"
                  style="flex: 1;"
                >Undo</button>
              </div>
              <p style="font-size: 0.85rem; color: #64748b; margin-top: 8px;">Click and drag to sign above</p>
            </div>

            <div style="margin-bottom: 24px;">
              <label for="directorDate" style="display: block; font-weight: 600; color: #1e293b; margin-bottom: 8px;">Date:</label>
              <input 
                type="text" 
                id="directorDate" 
                name="directorDate" 
                readonly
                style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 6px; font-size: 1rem; box-sizing: border-box; background: #f8fafc; color: #64748b;"
              >
            </div>

            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 16px; border-radius: 4px; margin-top: 16px;">
              <p style="margin: 0; font-size: 0.95rem; color: #92400e;">
                <strong>ℹ️ Note:</strong> The director signature and date will be added by Swash management once you submit your acknowledgement. Your submission will be saved automatically.
              </p>
            </div>
          </div>

          <!-- Submit Button (placeholder for now) -->
          <div style="margin-top: 32px; display: flex; gap: 12px;">
            <button 
              type="submit" 
              class="btn btn-primary"
              style="flex: 1; padding: 12px 24px; font-size: 1rem;"
            >Submit Acknowledgement</button>
            <button 
              type="reset" 
              class="btn btn-secondary"
              style="flex: 1; padding: 12px 24px; font-size: 1rem;"
            >Reset Form</button>
          </div>
        </form>
      </div>

      <!-- Footer -->
      <div class="footer-text">
        <p>Swash Cleaning Ltd | Field Sales Team Policy Handbook | Version 1.3 | © 2025<br>
        contact@swashcleaning.co.uk | 03300 436 345</p>
      </div>
    </div>
  </main>

  <script type="module" src="../auth-check.js"></script>

  <script>
    // Signature Canvas Handler
    class SignatureCanvas {
      constructor(canvasId, clearBtnId, undoBtnId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.isDrawing = false;
        this.paths = [];
        this.currentPath = [];

        // Set canvas size responsively
        this.resizeCanvas();
        
        // Event listeners
        this.canvas.addEventListener('mousedown', (e) => this.startDrawing(e));
        this.canvas.addEventListener('mousemove', (e) => this.draw(e));
        this.canvas.addEventListener('mouseup', () => this.stopDrawing());
        this.canvas.addEventListener('mouseout', () => this.stopDrawing());

        // Touch events for mobile
        this.canvas.addEventListener('touchstart', (e) => this.startDrawing(e));
        this.canvas.addEventListener('touchmove', (e) => this.draw(e));
        this.canvas.addEventListener('touchend', () => this.stopDrawing());

        // Clear and Undo buttons
        document.getElementById(clearBtnId).addEventListener('click', () => this.clearCanvas());
        document.getElementById(undoBtnId).addEventListener('click', () => this.undoPath());
      }

      resizeCanvas() {
        const rect = this.canvas.getBoundingClientRect();
        this.canvas.width = rect.width;
        this.canvas.height = rect.height;
        this.redrawCanvas();
      }

      startDrawing(e) {
        this.isDrawing = true;
        this.currentPath = [];
        const pos = this.getPosition(e);
        this.currentPath.push(pos);
        this.ctx.beginPath();
        this.ctx.moveTo(pos.x, pos.y);
      }

      draw(e) {
        if (!this.isDrawing) return;
        
        const pos = this.getPosition(e);
        this.currentPath.push(pos);
        
        this.ctx.lineTo(pos.x, pos.y);
        this.ctx.lineWidth = 2;
        this.ctx.lineCap = 'round';
        this.ctx.lineJoin = 'round';
        this.ctx.strokeStyle = '#0078d7';
        this.ctx.stroke();
      }

      stopDrawing() {
        if (!this.isDrawing) return;
        this.isDrawing = false;
        this.ctx.closePath();
        if (this.currentPath.length > 0) {
          this.paths.push(this.currentPath);
        }
      }

      getPosition(e) {
        const rect = this.canvas.getBoundingClientRect();
        if (e.touches) {
          return {
            x: e.touches[0].clientX - rect.left,
            y: e.touches[0].clientY - rect.top
          };
        }
        return {
          x: e.clientX - rect.left,
          y: e.clientY - rect.top
        };
      }

      clearCanvas() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.paths = [];
        this.currentPath = [];
      }

      undoPath() {
        this.paths.pop();
        this.redrawCanvas();
      }

      redrawCanvas() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.paths.forEach(path => {
          this.ctx.beginPath();
          this.ctx.moveTo(path[0].x, path[0].y);
          for (let i = 1; i < path.length; i++) {
            this.ctx.lineTo(path[i].x, path[i].y);
          }
          this.ctx.lineWidth = 2;
          this.ctx.lineCap = 'round';
          this.ctx.lineJoin = 'round';
          this.ctx.strokeStyle = '#0078d7';
          this.ctx.stroke();
          this.ctx.closePath();
        });
      }

      getSignatureData() {
        return this.canvas.toDataURL('image/png');
      }

      hasSignature() {
        return this.paths.length > 0;
      }
    }

    // Initialize signature canvases
    const employeeSignature = new SignatureCanvas('signatureCanvas', 'clearSignature', 'undoSignature');
    const directorSignature = new SignatureCanvas('directorSignature', 'clearDirectorSignature', 'undoDirectorSignature');

    // Auto-fill dates
    function formatDate(date) {
      const day = String(date.getDate()).padStart(2, '0');
      const month = String(date.getMonth() + 1).padStart(2, '0');
      const year = date.getFullYear();
      return `${day}/${month}/${year}`;
    }

    const today = new Date();
    document.getElementById('employeeDate').value = formatDate(today);
    document.getElementById('directorDate').value = formatDate(today);

    // Form submission handler
    document.getElementById('policyAcknowledgementForm').addEventListener('submit', function(e) {
      e.preventDefault();

      // Validation
      const employeeName = document.getElementById('employeeName').value.trim();
      if (!employeeName) {
        alert('Please enter your name');
        return;
      }

      if (!employeeSignature.hasSignature()) {
        alert('Please sign in the employee signature box');
        return;
      }

      // Prepare submission data
      const formData = {
        employeeName: employeeName,
        employeeSignature: employeeSignature.getSignatureData(),
        employeeDate: document.getElementById('employeeDate').value,
        directorSignature: directorSignature.hasSignature() ? directorSignature.getSignatureData() : null,
        directorDate: document.getElementById('directorDate').value,
        submittedAt: new Date().toISOString(),
        acknowledged: true
      };

      console.log('Policy acknowledgement form ready for submission:', formData);
      
      // TODO: Add your submission logic here
      // You'll provide the backend integration details
      // Example: 
      // await fetch('/api/submit-policy-acknowledgement', {
      //   method: 'POST',
      //   body: JSON.stringify(formData)
      // });
      
      alert('✓ Policy acknowledgement submitted successfully. Your response has been saved. Thank you!');
      
      // Optionally disable form after submission
      // document.getElementById('policyAcknowledgementForm').style.opacity = '0.6';
      // this.style.pointerEvents = 'none';
    });

    // Handle window resize for responsive canvas
    window.addEventListener('resize', () => {
      employeeSignature.resizeCanvas();
      directorSignature.resizeCanvas();
    });
  </script>

